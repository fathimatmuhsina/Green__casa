<%- include('../layouts/detailheader.ejs') %>


    <div class="row">
        <div class="col">
            <nav aria-label="breadcrumb" class="bg-light rounded-3 p-3 mb-4">
                <ol class="breadcrumb mb-0">
                    <li class="breadcrumb-item"><a href="/home">Home</a></li>
                    <li class="breadcrumb-item"><a href="/profile">Profile</a></li>
                    <li class="breadcrumb-item active" aria-current="page">Change Password</li>
                </ol>
            </nav>
        </div>
    </div>

    <div class="container mt-5">
        <div class="row justify-content-center">
            <div class="col-md-6">
                <div class="card">
                    <div class="card-header text-center">
                        <h5>Change Password</h5>
                    </div>
                    <div class="card-body">

                        <form action="/change-password" method="post">
                            <div class="form-group mb-3 row">
                                <label for="currentPassword" class="col-sm-4 col-form-label">Current Password</label>
                                <div class="col-sm-8">
                                    <input type="password" name="currentPassword" id="currentPassword"
                                        class="form-control">
                                    <% if (errors && errors.currentPassword) { %>
                                        <div class="text-danger">
                                            <%= errors.currentPassword.msg %>
                                        </div>
                                        <% } %>
                                </div>
                            </div>
                            <div class="form-group mb-3 row">
                                <label for="newPassword" class="col-sm-4 col-form-label">New Password</label>
                                <div class="col-sm-8">
                                    <input type="password" name="newPassword" id="newPassword" class="form-control">
                                    <% if (errors && errors.newPassword) { %>
                                        <div class="text-danger">
                                            <%= errors.newPassword.msg %>
                                        </div>
                                        <% } %>
                                </div>
                            </div>
                            <div class="form-group mb-3 row">
                                <label for="confirmPassword" class="col-sm-4 col-form-label">Confirm New
                                    Password</label>
                                <div class="col-sm-8">
                                    <input type="password" name="confirmPassword" id="confirmPassword"
                                        class="form-control">
                                    <% if (errors && errors.confirmPassword) { %>
                                        <div class="text-danger">
                                            <%= errors.confirmPassword.msg %>
                                        </div>
                                        <% } %>
                                </div>
                            </div>
                            <div class="text-center"><button type="submit" class="btn text-white"
                                   id="" style="background-color: #204f38;">Update Password</button></div>
                        </form>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script src="js/bootstrap.min.js"></script>
    <script>
      document.addEventListener('DOMContentLoaded', () => {
        document.getElementById('changePasswordBtn').addEventListener('click', function(e) {
          e.preventDefault(); // Prevent the form from submitting immediately
    
          // Show confirmation alert
          Swal.fire({
            title: 'Are you sure?',
            text: "Do you want to change your password?",
            icon: 'warning',
            showCancelButton: true,
            confirmButtonColor: '#204f38',
            cancelButtonColor: '#d33',
            confirmButtonText: 'Yes, change it!'
          }).then((result) => {
            if (result.isConfirmed) {
              // Submit the form
              document.getElementById('changePasswordForm').submit();
              
              // Show success alert after a brief delay to allow form submission
              setTimeout(() => {
                Swal.fire({
                  title: 'Success!',
                  text: 'Your password has been changed.',
                  icon: 'success',
                  confirmButtonColor: '#204f38'
                });
              }, 500); // Adjust the delay as needed
            }
          });
        });
      });
    </script>
</body>
</body>

</html>